<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ingresar Denuncia Â· LDD</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

<div class="wizard-page" id="wizardPage">

  <!-- TOP BAR -->
  <div class="wizard-topbar">
    <a href="index.html" class="wizard-logo">
      <svg width="28" height="28" viewBox="0 0 32 32" fill="none">
        <rect width="32" height="32" rx="8" fill="#5B4FDB"/>
        <path d="M8 10h16M8 16h10M8 22h13" stroke="#fff" stroke-width="2.5" stroke-linecap="round"/>
        <circle cx="24" cy="22" r="4" fill="#fff"/>
        <path d="M22.5 22l1 1 2-2" stroke="#5B4FDB" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <span class="wizard-logo-text">LDD<span class="wizard-logo-dot">.</span></span>
    </a>
    <div style="display:flex;align-items:center;gap:12px">
      <div class="wizard-secure">
        <svg width="13" height="13" viewBox="0 0 14 14" fill="none"><path d="M7 1l5 2.5v4c0 2.8-2.2 5.4-5 6-2.8-.6-5-3.2-5-6v-4L7 1z" stroke="currentColor" stroke-width="1.4" stroke-linejoin="round"/></svg>
        ConexiÃ³n cifrada
      </div>
      <a href="empresas.html" style="font-size:13px;color:rgba(255,255,255,.4);font-weight:500;text-decoration:none">â† Cambiar empresa</a>
    </div>
  </div>

  <!-- PROGRESS BAR -->
  <div class="wizard-progress-track">
    <div class="wizard-progress-fill" id="progressFill" style="width: 0%"></div>
  </div>
  <div class="wizard-step-label" id="stepLabel">Paso 1 de 10</div>

  <!-- BODY -->
  <div class="wizard-body">
    <div class="wizard-card" id="wizardCard">

      <!-- ===== STEP 0: INTRO ===== -->
      <div class="wizard-step active" id="step-0">
        <div class="wizard-intro">
          <div class="company-chip" id="companyChip">
            <svg width="14" height="14" viewBox="0 0 14 14" fill="none"><rect x="2" y="2" width="10" height="10" rx="2" stroke="currentColor" stroke-width="1.3"/><path d="M5 7h4M5 9.5h2.5" stroke="currentColor" stroke-width="1.3" stroke-linecap="round"/></svg>
            <span id="companyChipName">Tu empresa</span>
          </div>
          <h1>HacÃ© tu denuncia</h1>
          <p>El proceso es confidencial, guiado y toma menos de 5 minutos. PodÃ©s elegir el anonimato total.</p>
          <div class="wizard-guarantees">
            <div class="guarantee"><span class="guarantee-dot"></span>100% anÃ³nimo</div>
            <div class="guarantee"><span class="guarantee-dot"></span>Cifrado end-to-end</div>
            <div class="guarantee"><span class="guarantee-dot"></span>Sin registro de IP</div>
            <div class="guarantee"><span class="guarantee-dot"></span>Cumplimiento OCDE / GAFI</div>
          </div>
          <button class="wizard-next" onclick="goToStep(1)" style="margin:0 auto;display:flex">
            Comenzar
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M3 8h10M9 4l4 4-4 4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </button>
          <p style="margin-top:20px;font-size:12px;color:rgba(0,0,0,.3);font-style:italic">
            Los formularios, preguntas e idioma son personalizables segÃºn cada organizaciÃ³n.
          </p>
        </div>
      </div>

      <!-- ===== STEP 1: Â¿ES DENUNCIA COMPLEMENTARIA? ===== -->
      <div class="wizard-step" id="step-1">
        <span class="wizard-step-num">Paso 1 Â· IdentificaciÃ³n</span>
        <h2>Â¿Es una denuncia complementaria?</h2>
        <p class="step-hint">IndicÃ¡ si esta denuncia estÃ¡ relacionada con una anterior ya registrada en el sistema.</p>
        <div class="freq-grid">
          <button class="freq-option" data-step="1" data-val="no" onclick="selectFreq(this,1)">
            <div class="freq-dot"></div>
            <div class="freq-text">
              <strong>No, es una denuncia nueva</strong>
              <span>Nunca presentÃ© esta situaciÃ³n antes</span>
            </div>
          </button>
          <button class="freq-option" data-step="1" data-val="si" onclick="selectFreq(this,1)">
            <div class="freq-dot"></div>
            <div class="freq-text">
              <strong>SÃ­, complementa una denuncia anterior</strong>
              <span>Tengo un cÃ³digo o referencia previa</span>
            </div>
          </button>
        </div>
        <div id="complementRef" style="display:none">
          <label style="font-size:14px;font-weight:600;color:var(--gray-700);display:block;margin-bottom:8px">CÃ³digo o referencia de la denuncia anterior (opcional)</label>
          <input class="wizard-input" type="text" placeholder="Ej: LDD-2024-8821 o fecha aproximada..." />
        </div>
        <div class="wizard-footer">
          <button class="wizard-back" onclick="goToStep(0)">â† Anterior</button>
          <button class="wizard-next" id="next-1" onclick="goToStep(2)">Siguiente â†’</button>
        </div>
      </div>

      <!-- ===== STEP 2: TIPO DE IRREGULARIDAD ===== -->
      <div class="wizard-step" id="step-2">
        <span class="wizard-step-num">Paso 2 Â· Tipo de hecho</span>
        <h2>Â¿QuÃ© tipo de irregularidad querÃ©s denunciar?</h2>
        <p class="step-hint">SeleccionÃ¡ la categorÃ­a que mejor describe la situaciÃ³n. PodÃ©s elegir mÃ¡s de una.</p>
        <div class="category-grid">
          <button class="cat-option" onclick="toggleCat(this)" data-val="corrupcion">
            <span class="cat-icon">âš–ï¸</span>
            <span class="cat-label">CorrupciÃ³n / Soborno</span>
          </button>
          <button class="cat-option" onclick="toggleCat(this)" data-val="fraude">
            <span class="cat-icon">ğŸ§¾</span>
            <span class="cat-label">Fraude o malversaciÃ³n</span>
          </button>
          <button class="cat-option" onclick="toggleCat(this)" data-val="conflicto">
            <span class="cat-icon">ğŸ¤</span>
            <span class="cat-label">Conflicto de intereses</span>
          </button>
          <button class="cat-option" onclick="toggleCat(this)" data-val="lavado">
            <span class="cat-icon">ğŸ’¸</span>
            <span class="cat-label">Lavado de activos</span>
          </button>
          <button class="cat-option" onclick="toggleCat(this)" data-val="acoso_laboral">
            <span class="cat-icon">ğŸš«</span>
            <span class="cat-label">Acoso laboral</span>
          </button>
          <button class="cat-option" onclick="toggleCat(this)" data-val="acoso_sexual">
            <span class="cat-icon">ğŸ›‘</span>
            <span class="cat-label">Acoso / violencia sexual</span>
          </button>
          <button class="cat-option" onclick="toggleCat(this)" data-val="discriminacion">
            <span class="cat-icon">ğŸ³ï¸</span>
            <span class="cat-label">DiscriminaciÃ³n</span>
          </button>
          <button class="cat-option" onclick="toggleCat(this)" data-val="seguridad">
            <span class="cat-icon">â›‘ï¸</span>
            <span class="cat-label">Seguridad laboral / ambiental</span>
          </button>
          <button class="cat-option" onclick="toggleCat(this)" data-val="datos">
            <span class="cat-icon">ğŸ”’</span>
            <span class="cat-label">ViolaciÃ³n de datos / privacidad</span>
          </button>
          <button class="cat-option" onclick="toggleCat(this)" data-val="otro">
            <span class="cat-icon">ğŸ“‹</span>
            <span class="cat-label">Otro / No especificado</span>
          </button>
        </div>
        <div class="wizard-footer">
          <button class="wizard-back" onclick="goToStep(1)">â† Anterior</button>
          <button class="wizard-next" id="next-2" onclick="goToStep(3)">Siguiente â†’</button>
        </div>
      </div>

      <!-- ===== STEP 3: DESCRIPCIÃ“N ===== -->
      <div class="wizard-step" id="step-3">
        <span class="wizard-step-num">Paso 3 Â· DescripciÃ³n del hecho</span>
        <h2>Â¿En quÃ© consistiÃ³ el hecho?</h2>
        <p class="step-hint">DescribÃ­ con detalle el hecho y/o incumplimiento denunciado. Mientras mÃ¡s especÃ­fico, mejor podemos actuar.</p>
        <textarea class="wizard-textarea" id="descriptionText" maxlength="4000" placeholder="DescribÃ­ quÃ© ocurriÃ³, cuÃ¡ndo, dÃ³nde y en quÃ© contexto..." oninput="updateCounter()"></textarea>
        <div class="char-counter"><span id="charCount">0</span> / 4000 caracteres</div>
        <div class="wizard-footer">
          <button class="wizard-back" onclick="goToStep(2)">â† Anterior</button>
          <button class="wizard-next" id="next-3" onclick="goToStep(4)" disabled>Siguiente â†’</button>
        </div>
      </div>

      <!-- ===== STEP 4: ÃREA ===== -->
      <div class="wizard-step" id="step-4">
        <span class="wizard-step-num">Paso 4 Â· Ãrea involucrada</span>
        <h2>Â¿En quÃ© Ã¡rea ocurrieron los hechos?</h2>
        <p class="step-hint">SeleccionÃ¡ el sector o departamento relacionado con la denuncia.</p>
        <div class="pills-grid" id="areaPills">
          <button class="pill" onclick="selectPill(this,'area')" data-val="direccion">DirecciÃ³n General</button>
          <button class="pill" onclick="selectPill(this,'area')" data-val="rrhh">Recursos Humanos</button>
          <button class="pill" onclick="selectPill(this,'area')" data-val="finanzas">Finanzas / Contabilidad</button>
          <button class="pill" onclick="selectPill(this,'area')" data-val="compras">Compras / Proveedores</button>
          <button class="pill" onclick="selectPill(this,'area')" data-val="ventas">Ventas / Comercial</button>
          <button class="pill" onclick="selectPill(this,'area')" data-val="operaciones">Operaciones</button>
          <button class="pill" onclick="selectPill(this,'area')" data-val="it">IT / Sistemas</button>
          <button class="pill" onclick="selectPill(this,'area')" data-val="legal">Legal / Compliance</button>
          <button class="pill" onclick="selectPill(this,'area')" data-val="produccion">ProducciÃ³n</button>
          <button class="pill" onclick="selectPill(this,'area')" data-val="logistica">LogÃ­stica / DistribuciÃ³n</button>
          <button class="pill" onclick="selectPill(this,'area')" data-val="marketing">Marketing / ComunicaciÃ³n</button>
          <button class="pill" onclick="selectPill(this,'area')" data-val="no_sÃ©">No lo sÃ© / Prefiero no decir</button>
        </div>
        <div class="wizard-footer">
          <button class="wizard-back" onclick="goToStep(3)">â† Anterior</button>
          <div style="display:flex;align-items:center;gap:12px">
            <button class="wizard-skip" onclick="goToStep(5)">Omitir</button>
            <button class="wizard-next" id="next-4" onclick="goToStep(5)">Siguiente â†’</button>
          </div>
        </div>
      </div>

      <!-- ===== STEP 5: PERÃODO ===== -->
      <div class="wizard-step" id="step-5">
        <span class="wizard-step-num">Paso 5 Â· PerÃ­odo</span>
        <h2>Â¿En quÃ© perÃ­odo ocurrieron los hechos?</h2>
        <p class="step-hint">IndicÃ¡ la fecha o rango aproximado. No es necesario ser exacto.</p>
        <div class="freq-grid">
          <button class="freq-option" data-step="5" data-val="actualmente" onclick="selectFreq(this,5)">
            <div class="freq-dot"></div>
            <div class="freq-text"><strong>EstÃ¡ ocurriendo ahora</strong><span>La situaciÃ³n es actual y en curso</span></div>
          </button>
          <button class="freq-option" data-step="5" data-val="reciente" onclick="selectFreq(this,5)">
            <div class="freq-dot"></div>
            <div class="freq-text"><strong>Hace menos de 6 meses</strong><span>SituaciÃ³n reciente</span></div>
          </button>
          <button class="freq-option" data-step="5" data-val="hace_tiempo" onclick="selectFreq(this,5)">
            <div class="freq-dot"></div>
            <div class="freq-text"><strong>Hace mÃ¡s de 6 meses</strong><span>SituaciÃ³n pasada</span></div>
          </button>
          <button class="freq-option" data-step="5" data-val="no_se" onclick="selectFreq(this,5)">
            <div class="freq-dot"></div>
            <div class="freq-text"><strong>No lo sÃ© con exactitud</strong><span>No recuerdo la fecha</span></div>
          </button>
        </div>
        <label style="font-size:14px;font-weight:600;color:var(--gray-700);display:block;margin-bottom:8px">Fecha aproximada (dd/mm/aaaa) â€” opcional</label>
        <input class="wizard-input" type="text" placeholder="Ej: 15/03/2024 o marzo 2024" />
        <div class="wizard-footer">
          <button class="wizard-back" onclick="goToStep(4)">â† Anterior</button>
          <button class="wizard-next" onclick="goToStep(6)">Siguiente â†’</button>
        </div>
      </div>

      <!-- ===== STEP 6: CONOCIMIENTO DE LA DIRECCIÃ“N ===== -->
      <div class="wizard-step" id="step-6">
        <span class="wizard-step-num">Paso 6 Â· Conocimiento interno</span>
        <h2>Â¿La DirecciÃ³n y/o Gerencia estÃ¡ al tanto de este problema?</h2>
        <p class="step-hint">Esta informaciÃ³n es importante para determinar el nivel de escalamiento de la investigaciÃ³n.</p>
        <div class="freq-grid">
          <button class="freq-option" data-step="6" data-val="si" onclick="selectFreq(this,6)">
            <div class="freq-dot"></div>
            <div class="freq-text"><strong>SÃ­, estÃ¡ al tanto</strong><span>La direcciÃ³n o gerencia conoce la situaciÃ³n</span></div>
          </button>
          <button class="freq-option" data-step="6" data-val="no" onclick="selectFreq(this,6)">
            <div class="freq-dot"></div>
            <div class="freq-text"><strong>No, no lo saben</strong><span>La situaciÃ³n no fue reportada internamente</span></div>
          </button>
          <button class="freq-option" data-step="6" data-val="involucrada" onclick="selectFreq(this,6)">
            <div class="freq-dot"></div>
            <div class="freq-text"><strong>EstÃ¡n involucrados</strong><span>La direcciÃ³n o gerencia forma parte del problema</span></div>
          </button>
          <button class="freq-option" data-step="6" data-val="no_sÃ©" onclick="selectFreq(this,6)">
            <div class="freq-dot"></div>
            <div class="freq-text"><strong>No lo sÃ©</strong><span>No tengo informaciÃ³n sobre esto</span></div>
          </button>
        </div>
        <div style="margin-top:8px">
          <label style="font-size:14px;font-weight:600;color:var(--gray-700);display:block;margin-bottom:8px">Â¿CÃ³mo te enteraste? (opcional)</label>
          <input class="wizard-input" type="text" placeholder="Ej: lo presenciÃ©, me lo contaron, encontrÃ© documentos..." />
        </div>
        <div class="wizard-footer">
          <button class="wizard-back" onclick="goToStep(5)">â† Anterior</button>
          <button class="wizard-next" onclick="goToStep(7)">Siguiente â†’</button>
        </div>
      </div>

      <!-- ===== STEP 7: INVOLUCRADOS ===== -->
      <div class="wizard-step" id="step-7">
        <span class="wizard-step-num">Paso 7 Â· Personas involucradas</span>
        <h2>Â¿QuiÃ©nes son los involucrados?</h2>
        <p class="step-hint">PodÃ©s agregar mÃ¡s de un involucrado. UsÃ¡ tÃ©rminos generales si preferÃ­s no nombrar personas especÃ­ficas (ej: "el gerente de compras").</p>

        <div id="involvedList">
          <div class="involved-row">
            <input class="wizard-input" type="text" placeholder="Nombre y apellido o descripciÃ³n del rol" style="margin-bottom:8px" />
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:16px">
              <input class="wizard-input" type="text" placeholder="RelaciÃ³n con la organizaciÃ³n" style="margin-bottom:0" />
              <input class="wizard-input" type="text" placeholder="Cargo / puesto" style="margin-bottom:0" />
            </div>
          </div>
        </div>

        <button onclick="addInvolvedRow()" style="display:inline-flex;align-items:center;gap:6px;font-size:13px;font-weight:600;color:var(--primary);background:none;border:none;cursor:pointer;padding:0;font-family:var(--font-body);margin-bottom:24px">
          <svg width="18" height="18" viewBox="0 0 18 18" fill="none"><circle cx="9" cy="9" r="8" stroke="currentColor" stroke-width="1.5"/><path d="M9 6v6M6 9h6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
          Agregar otro involucrado
        </button>

        <div class="wizard-footer">
          <button class="wizard-back" onclick="goToStep(6)">â† Anterior</button>
          <div style="display:flex;align-items:center;gap:12px">
            <button class="wizard-skip" onclick="goToStep(8)">Omitir</button>
            <button class="wizard-next" onclick="goToStep(8)">Siguiente â†’</button>
          </div>
        </div>
      </div>

      <!-- ===== STEP 8: TESTIGOS + EVIDENCIAS ===== -->
      <div class="wizard-step" id="step-8">
        <span class="wizard-step-num">Paso 8 Â· Testigos y evidencias</span>
        <h2>Â¿Hay testigos o pruebas del hecho?</h2>
        <p class="step-hint">Esta informaciÃ³n fortalece la investigaciÃ³n. Todo es opcional.</p>

        <!-- Testigos -->
        <div style="margin-bottom:24px">
          <label style="font-size:14px;font-weight:600;color:var(--gray-700);margin-bottom:12px;display:flex;align-items:center;gap:6px">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><circle cx="8" cy="6" r="3" stroke="var(--primary)" stroke-width="1.4"/><path d="M3 14c0-2.8 2.2-5 5-5s5 2.2 5 5" stroke="var(--primary)" stroke-width="1.4" stroke-linecap="round"/></svg>
            Testigos (opcional)
          </label>
          <div id="witnessList">
            <div class="involved-row" style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;margin-bottom:8px">
              <input class="wizard-input" type="text" placeholder="Nombre / descripciÃ³n" style="margin-bottom:0" />
              <input class="wizard-input" type="text" placeholder="RelaciÃ³n con la org." style="margin-bottom:0" />
              <input class="wizard-input" type="text" placeholder="Cargo / puesto" style="margin-bottom:0" />
            </div>
          </div>
          <button onclick="addWitnessRow()" style="display:inline-flex;align-items:center;gap:6px;font-size:13px;font-weight:600;color:var(--primary);background:none;border:none;cursor:pointer;padding:0;font-family:var(--font-body)">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.4"/><path d="M8 5v6M5 8h6" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/></svg>
            Agregar testigo
          </button>
        </div>

        <!-- Evidencias -->
        <div>
          <label style="font-size:14px;font-weight:600;color:var(--gray-700);margin-bottom:12px;display:flex;align-items:center;gap:6px">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="2" y="2" width="12" height="12" rx="2" stroke="var(--primary)" stroke-width="1.4"/><path d="M5 8h6M5 11h3" stroke="var(--primary)" stroke-width="1.4" stroke-linecap="round"/></svg>
            Adjuntar documentaciÃ³n (opcional)
          </label>
          <div class="wizard-upload" id="uploadZone8" onclick="document.getElementById('fileInput8').click()">
            <svg width="28" height="28" viewBox="0 0 28 28" fill="none" style="color:var(--gray-400)"><path d="M14 18V10m0 0l-4 4m4-4l4 4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/><rect x="3" y="19" width="22" height="6" rx="2" stroke="currentColor" stroke-width="1.8"/></svg>
            <p>ArrastrÃ¡ archivos o <span style="color:var(--primary);font-weight:600">hacÃ© clic para subir</span></p>
            <span>PDF, imÃ¡genes, audio, video Â· MÃ¡x. 25 MB</span>
            <input type="file" id="fileInput8" multiple style="display:none" accept=".pdf,.jpg,.jpeg,.png,.mp3,.mp4,.doc,.docx" />
          </div>
          <div id="fileList8"></div>
        </div>

        <div class="wizard-footer">
          <button class="wizard-back" onclick="goToStep(7)">â† Anterior</button>
          <button class="wizard-next" onclick="goToStep(9)">Siguiente â†’</button>
        </div>
      </div>

      <!-- ===== STEP 9: OTRAS PERSONAS INVOLUCRADAS ===== -->
      <div class="wizard-step" id="step-9">
        <span class="wizard-step-num">Paso 9 Â· Otras personas</span>
        <h2>Â¿Hay otras personas relacionadas con los hechos?</h2>
        <p class="step-hint">AdemÃ¡s de los directamente denunciados, Â¿hay otros individuos relacionados que deberÃ­a conocer el equipo de investigaciÃ³n?</p>

        <div class="freq-grid" style="margin-bottom:16px">
          <button class="freq-option" data-step="9" data-val="si" onclick="selectFreq(this,9); document.getElementById('otherPersonsField').style.display='block'">
            <div class="freq-dot"></div>
            <div class="freq-text"><strong>SÃ­, hay otras personas</strong><span>Quiero indicar quiÃ©nes y cÃ³mo estÃ¡n involucradas</span></div>
          </button>
          <button class="freq-option" data-step="9" data-val="no" onclick="selectFreq(this,9); document.getElementById('otherPersonsField').style.display='none'">
            <div class="freq-dot"></div>
            <div class="freq-text"><strong>No</strong><span>Solo son las personas ya mencionadas</span></div>
          </button>
        </div>

        <div id="otherPersonsField" style="display:none">
          <div id="otherPersonsList">
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:8px">
              <input class="wizard-input" type="text" placeholder="Nombre / descripciÃ³n" style="margin-bottom:0" />
              <input class="wizard-input" type="text" placeholder="VinculaciÃ³n con el hecho" style="margin-bottom:0" />
            </div>
          </div>
          <button onclick="addOtherRow()" style="display:inline-flex;align-items:center;gap:6px;font-size:13px;font-weight:600;color:var(--primary);background:none;border:none;cursor:pointer;padding:0;font-family:var(--font-body);margin-bottom:8px">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.4"/><path d="M8 5v6M5 8h6" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/></svg>
            Agregar otra persona
          </button>
        </div>

        <div class="wizard-footer">
          <button class="wizard-back" onclick="goToStep(8)">â† Anterior</button>
          <div style="display:flex;align-items:center;gap:12px">
            <button class="wizard-skip" onclick="goToStep(10)">Omitir</button>
            <button class="wizard-next" onclick="goToStep(10)">Siguiente â†’</button>
          </div>
        </div>
      </div>

      <!-- ===== STEP 10: IDENTIDAD + SUBMIT ===== -->
      <div class="wizard-step" id="step-10">
        <span class="wizard-step-num">Paso 10 Â· Tu identidad</span>
        <h2>Â¿DeseÃ¡s realizar la denuncia de forma anÃ³nima?</h2>
        <p class="step-hint">PodÃ©s elegir el anonimato total. Si dejÃ¡s tus datos, podemos contactarte si necesitamos mÃ¡s informaciÃ³n â€” siempre de forma confidencial.</p>

        <div class="anon-toggle">
          <button class="anon-btn active" id="anonBtn" onclick="setAnon(true)">
            ğŸ›¡ï¸ SÃ­, permanecer anÃ³nimo
          </button>
          <button class="anon-btn" id="identBtn" onclick="setAnon(false)">
            ğŸ‘¤ No, dejar mis datos
          </button>
        </div>

        <div class="identity-fields" id="identityFields">
          <p style="font-size:13px;color:var(--gray-500);margin-bottom:12px;line-height:1.6">
            Tus datos son tratados con estricta confidencialidad y solo serÃ¡n utilizados para el seguimiento de tu denuncia.
          </p>
          <div class="identity-row">
            <input class="wizard-input" type="text" placeholder="Nombre y apellido" />
            <input class="wizard-input" type="email" placeholder="Email de contacto" />
          </div>
          <input class="wizard-input" type="tel" placeholder="TelÃ©fono (opcional)" />
        </div>

        <div class="form-checkbox" style="margin-top:16px">
          <input type="checkbox" id="termsCheck" />
          <label for="termsCheck" style="font-size:13px;color:var(--gray-500);line-height:1.6;font-weight:400">
            Confirmo que la informaciÃ³n provista es verÃ­dica y completa segÃºn mi conocimiento. He leÃ­do la
            <a href="#" style="color:var(--primary)">PolÃ­tica de Privacidad</a>
            y acepto que mi denuncia sea procesada por el equipo de compliance.
          </label>
        </div>

        <div class="wizard-footer">
          <button class="wizard-back" onclick="goToStep(9)">â† Anterior</button>
          <button class="wizard-next" id="submitBtn" onclick="submitForm()">
            Enviar denuncia
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M3 8h10M9 4l4 4-4 4" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </button>
        </div>
      </div>

      <!-- ===== SUCCESS ===== -->
      <div class="wizard-step" id="step-success">
        <div class="wizard-success">
          <div class="success-check">âœ“</div>
          <h2>Denuncia recibida</h2>
          <p>Tu denuncia fue enviada de forma segura al equipo de compliance de <strong id="successCompanyName"></strong>. GuardÃ¡ tu cÃ³digo de seguimiento.</p>
          <div class="tracking-box">
            <p>CÃ³digo de seguimiento</p>
            <div class="tracking-code" id="trackingCodeDisplay"></div>
          </div>
          <p style="font-size:13px;color:var(--gray-400);margin-bottom:28px;line-height:1.6">
            Con este cÃ³digo podÃ©s consultar el estado de tu denuncia en cualquier momento, sin revelar tu identidad.
          </p>
          <div class="success-actions">
            <button onclick="window.print()" class="btn btn-outline btn-lg" style="justify-content:center;width:100%">
              ğŸ–¨ï¸ Guardar comprobante
            </button>
            <a href="index.html" class="btn btn-ghost" style="justify-content:center;font-size:14px;width:100%">
              Volver al inicio â†’
            </a>
          </div>
        </div>
      </div>

    </div><!-- /wizard-card -->
  </div><!-- /wizard-body -->

  <!-- FOOTER NOTE -->
  <div style="text-align:center;padding:0 24px 24px;font-size:12px;color:rgba(255,255,255,.25);line-height:1.6">
    ğŸ”’ Cifrado end-to-end Â· Sin registro de IP Â· Cumplimiento internacional: OCDE, GAFI, ISO 37001 Â· Formularios personalizables por organizaciÃ³n e idioma
  </div>

</div><!-- /wizard-page -->

<script src="main.js"></script>
<script>
  // â”€â”€ Init â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const params = new URLSearchParams(window.location.search);
  const company = params.get('empresa') || 'tu empresa';
  document.title = `Denuncia Â· ${company} Â· LDD`;
  document.getElementById('companyChipName').textContent = company;
  document.getElementById('successCompanyName').textContent = company;

  const TOTAL_STEPS = 10;
  let currentStep = 0;

  // â”€â”€ Navigation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function goToStep(n) {
    // Validate step 3 (description required)
    if (currentStep === 3) {
      const desc = document.getElementById('descriptionText').value.trim();
      if (n > 3 && desc.length < 30) {
        document.getElementById('descriptionText').focus();
        document.getElementById('descriptionText').style.borderColor = 'var(--primary)';
        return;
      }
    }

    // Validate terms on final step
    if (currentStep === 10 && n === 'submit') {
      if (!document.getElementById('termsCheck').checked) {
        document.getElementById('termsCheck').closest('.form-checkbox').style.outline = '2px solid var(--primary)';
        return;
      }
    }

    // Hide current
    const cur = document.getElementById(currentStep === 0 ? 'step-0' : `step-${currentStep}`);
    if (cur) cur.classList.remove('active');

    currentStep = n;

    // Show next
    const next = document.getElementById(n === 'success' ? 'step-success' : `step-${n}`);
    if (next) next.classList.add('active');

    // Progress
    updateProgress();
    window.scrollTo(0, 0);
  }

  function updateProgress() {
    const pct = currentStep === 0 ? 0 : (currentStep / TOTAL_STEPS) * 100;
    document.getElementById('progressFill').style.width = `${Math.min(pct, 100)}%`;
    if (currentStep === 0) {
      document.getElementById('stepLabel').textContent = 'EmpezÃ¡ tu denuncia';
    } else if (currentStep <= TOTAL_STEPS) {
      document.getElementById('stepLabel').textContent = `Paso ${currentStep} de ${TOTAL_STEPS}`;
    } else {
      document.getElementById('stepLabel').textContent = 'Â¡Listo!';
    }
  }

  // â”€â”€ Selection helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function selectFreq(btn, step) {
    document.querySelectorAll(`[data-step="${step}"]`).forEach(b => b.classList.remove('selected'));
    btn.classList.add('selected');
    // Show complementary ref field if step 1 and "si"
    if (step === 1) {
      document.getElementById('complementRef').style.display =
        btn.dataset.val === 'si' ? 'block' : 'none';
    }
  }

  function toggleCat(btn) {
    btn.classList.toggle('selected');
    const anySelected = document.querySelectorAll('#step-2 .cat-option.selected').length > 0;
    document.getElementById('next-2').disabled = !anySelected;
  }

  function selectPill(btn, group) {
    // Single select for area
    document.querySelectorAll(`#areaPills .pill`).forEach(p => p.classList.remove('selected'));
    btn.classList.add('selected');
  }

  // â”€â”€ Description counter â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function updateCounter() {
    const val = document.getElementById('descriptionText').value;
    document.getElementById('charCount').textContent = val.length;
    document.getElementById('next-3').disabled = val.trim().length < 30;
  }

  // â”€â”€ Dynamic rows â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function addInvolvedRow() {
    const list = document.getElementById('involvedList');
    const row = document.createElement('div');
    row.className = 'involved-row';
    row.innerHTML = `
      <input class="wizard-input" type="text" placeholder="Nombre y apellido o descripciÃ³n del rol" style="margin-bottom:8px" />
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:16px">
        <input class="wizard-input" type="text" placeholder="RelaciÃ³n con la organizaciÃ³n" style="margin-bottom:0" />
        <input class="wizard-input" type="text" placeholder="Cargo / puesto" style="margin-bottom:0" />
      </div>`;
    list.appendChild(row);
  }

  function addWitnessRow() {
    const list = document.getElementById('witnessList');
    const row = document.createElement('div');
    row.style.cssText = 'display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;margin-bottom:8px';
    row.innerHTML = `
      <input class="wizard-input" type="text" placeholder="Nombre / descripciÃ³n" style="margin-bottom:0" />
      <input class="wizard-input" type="text" placeholder="RelaciÃ³n con la org." style="margin-bottom:0" />
      <input class="wizard-input" type="text" placeholder="Cargo / puesto" style="margin-bottom:0" />`;
    list.appendChild(row);
  }

  function addOtherRow() {
    const list = document.getElementById('otherPersonsList');
    const row = document.createElement('div');
    row.style.cssText = 'display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:8px';
    row.innerHTML = `
      <input class="wizard-input" type="text" placeholder="Nombre / descripciÃ³n" style="margin-bottom:0" />
      <input class="wizard-input" type="text" placeholder="VinculaciÃ³n con el hecho" style="margin-bottom:0" />`;
    list.appendChild(row);
  }

  // â”€â”€ Identity toggle â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function setAnon(anon) {
    document.getElementById('anonBtn').classList.toggle('active', anon);
    document.getElementById('identBtn').classList.toggle('active', !anon);
    document.getElementById('identityFields').classList.toggle('visible', !anon);
  }

  // â”€â”€ File upload â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  document.getElementById('fileInput8').addEventListener('change', function() {
    const list = document.getElementById('fileList8');
    Array.from(this.files).forEach(file => {
      const item = document.createElement('div');
      item.style.cssText = 'display:flex;align-items:center;gap:10px;padding:10px 14px;background:var(--gray-100);border-radius:8px;font-size:13px;color:var(--gray-700);margin-bottom:8px';
      item.innerHTML = `<span>ğŸ“</span><span>${file.name}</span><span style="color:var(--gray-400);font-size:12px;margin-left:auto">${(file.size/1024/1024).toFixed(2)} MB</span>`;
      list.appendChild(item);
    });
  });

  // â”€â”€ Keyboard: Enter to advance â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  document.addEventListener('keydown', e => {
    if (e.key === 'Enter' && e.target.tagName !== 'TEXTAREA') {
      const nextBtn = document.querySelector(`#step-${currentStep} .wizard-next:not([disabled])`);
      if (nextBtn) nextBtn.click();
    }
  });

  // â”€â”€ Submit â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function submitForm() {
    if (!document.getElementById('termsCheck').checked) {
      document.getElementById('termsCheck').closest('.form-checkbox').scrollIntoView({ behavior: 'smooth' });
      return;
    }
    const btn = document.getElementById('submitBtn');
    btn.disabled = true;
    btn.innerHTML = '<span class="spinner"></span> Enviando...';

    setTimeout(() => {
      const code = 'LDD-' + new Date().getFullYear() + '-' + Math.floor(1000 + Math.random() * 9000);
      document.getElementById('trackingCodeDisplay').textContent = code;
      document.getElementById('progressFill').style.width = '100%';
      document.getElementById('stepLabel').textContent = 'Â¡Listo!';
      goToStep('success');
    }, 1800);
  }
</script>

<style>
  .spinner {
    display: inline-block;
    width: 14px; height: 14px;
    border: 2px solid rgba(255,255,255,.3);
    border-top-color: white;
    border-radius: 50%;
    animation: spin .7s linear infinite;
  }
  @keyframes spin { to { transform: rotate(360deg); } }

  /* Disable next-2 initially */
  #next-2 { opacity: .45; pointer-events: none; }
  #next-2:not([disabled]) { opacity: 1; pointer-events: auto; }
</style>

</body>
</html>
